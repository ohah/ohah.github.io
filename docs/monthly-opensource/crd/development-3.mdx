---
title: 3-3. 욕심 부려보기
description: 추가로 욕심내서 구현해보기
---

# 3-3. 욕심 부려보기

백로그에서 "배민 백로그까지 구현"이라고 적어두고는 기본 기능부터 쌓여 올랐다. 그러다 보니 기본 기능을 다 완성하고 나서 이제야 책상에 앉아서 "이제야 할 수 있겠네" 하고 욕심을 부려보기로 했다.

배민이 그때 백로그를 적어뒀을 때, 나도 그렇게 끈질기게 남겨두길 바랬다 싶었고.

---

## 리덕스 디버깅도 DevTools에 넣기

배민과 카카오 블로그의 기술 글을 계속 읽으면서, 리덕스 디버깅에 대한 니즈가 늘었다. 기존에 Redux DevTools Extension을 써봤는데, 크롬 외에도 다른 환경에서 디버깅하기 힘든 점 때문에, 이걸 DevTools 내에서 해결하면 DX가 크게 좋아질 것 같았다.

기본적으로 Redux DevTools Extension을 CDP로 가져오는 방식은 이미 구현했다. 근데 이걸 그대로 React Native에도 적용하려니 생각보다 꼬이는 게 많더라.

### 리덕스 Polyfill

React Native에서는 기본 DevTools를 지원하지 않아서, 일단 빈껍데기만 만들어두기로 했다. `devTools: true`를 줬을 때 비로소 이 빈껍데기가 동작하도록.

어디에서라도 디버거가 붙길 바랬던 거니까 일단 "DevTools 있다"는 느낌만 줘서 사용자가 Redux DevTools Extension을 써도 되는지 안 되는지 알 수 있게 만들었다.

### MMKV·AsyncStorage 보드

리덕스 상태를 보는 거 그만하고, 이제 실제 데이터가 쌓이는 곳도 보고 싶어졌다.

MMKV과 AsyncStorage는 React Native에서 쓰이는 스토리지인데, 이걸 CDP로 열어서 보고 싶었다.

보드 UI라곤 할 수 있는 게 없다. 단순히 key-value 쌍만 띄워주고, 싶어서 지우려면 값을 넣어서 덮어쓰는 식이다.

처음에는 쓸데 없다고 여겼는데, 실제로 써보니 쓸모가 있더라. 특히 로그인 세션·토큰 같은 거 관리할 때 편하고.

### 어려웠던 점

- MMKV은 직렬화 형태와 직접 경합해서 억지로 쪼개야 하는 경우가 많았다
- AsyncStorage는 코드가 길어져서 뭔가 커스텀 데이터 타입을 정해놓고 거기에 맞춰야 하는데, 그 과정에서 타입 안정성이 떨어졌다
- 지금 생각해보면 이런 건 미들웨어에서 자동으로 처리하면 더 나았을 텐데, 지금은 그냥 직접 보이는 UI에 통과시키는 꼼수를 썼다

---

## 리액트 컴포넌트 트리 보기

리덕스는 이제 끝났다. 다음은 리액트다.

리액트 디버거는 그냥 Component Tree 밖에 없다. 그냥 콤마 찍고 보이는 거지만, 그게 제일 쓸모 있는 걸로 아는 개발자가 많다.

### CDP DOM 탐색과 리액트 연결

CDP의 DOM 탐색 기능으로 컴포넌트 트리를 긁어오는 건 어느 정도 가능했다. 근데 리액트가 이걸 본인만 알고 있기 때문에, 그걸 다시 보고 싶어지면 VirtualDOM·React internals을 건드려야 한다.

처음에는 그냥 태그명·속성만 떼어서 "리액트 컴포넌트"라고 헷갈리게 만들기로 했었다. 근데 그러면 디버깅 할 때 오히려 더 헷갈려서 결국엔 실제 리액트 정보를 알아내는 쪽으로 방향 섞었다.

### Performance Panel 대용

리액트로 긴급하게 구현하다 보니, 시간이 부족해서 Performance Panel은 건너뛰었다. 나중에 리미트가 늘면 진짜 시간이 나면 그때 따로 만들어 볼 수도 있고.

### 지금 상태

지금은 리덕스·MMKV·AsyncStorage 보드가 다 구현됐고, 거기에 리액트 컴포넌트 트리도 붙었다. 그래도 여러분이 보면 "이 게임이다 아니, 리액트까지 다?" 하고 신기해할 거다. 그게 바로 욕심이라는 뜻이다.

:::info 1줄 요약
취미로 시작하다 보니, 배민 백로그까지 구현했다. 리덕스 DevTools, MMKV/AsyncStorage 보드, React Native 지원까지. 리액트 컴포넌트 트리까지 거기서 거기 만들니까, 이제야 진짜 디버깅 툴이 된 느낌이 든다.
:::