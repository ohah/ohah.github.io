---
title: 3-2. 배민 백로그까지 구현
date: 2026-02-15
description: 구현 완료라고 생각했지만, 실제 배포하려면 백로그 문제가 넘쳐났다.
---

# 3-2. 배민 백로그까지 구현

## 드러나는 문제, 새로 쌓이는 백로그

처음에는 배민 블로그를 따라, CDP 기본 클라이언트와 웹소켓 서버를 만들어놓고 "끝났다!"라고 생각했지만, 진행 과정에서 숱하게 많은 크고 작은 문제가 드러났다.

배민도 전체를 순차적으로 만들었다기보단 점진적으로 개선하는 쪽에 가깝다고 했다. "한 번에 완성하지 않아도 된다"는 컨셉이 힘이 됐다. 기본적인 클라이언트와 서버가 동작하며, Inspector UI가 외형만 갖춘 시점에서 눈앞에 보이던 것들, 그리고 숨겨져 있던 백엔드의 문제가 속속 드러났다.

## 개선 단계와 주요한 개편

### 1. CDP 메시지 매칭 문제

초기 구현에서도 작동 자체는 문제가 없었지만, CDP 메시지가 많을 때 서버에서 매칭에 문제가 생기는 경우가 잦았다. 기본적으로 Command ID와 Event ID를 엄격히 관리해야 했는데, 자칫 클라이언트 릴레잉 중에 순서를 놓치면 Inspector 쪽에서 말 그대로 튕기는 현상이 생겼다.

- **해결책**: Command → Relay 직전에 큐를 만들고, 순서를 모니터링하며 오류 시 재요청하는 필터를 추가.

### 2. 이벤트 저장과 재현 과정

배민 레퍼런스에서는 이벤트를 저장 후 메타데이터화해서 재현하는 데 특화돼 있었다. 여기엔 upsert 접근 방식으로 추가만 하던 녹화 클라이언트 저장을 key-value 접근 구조와 별도 auto-save 방식으로 변경했다.

- **결과**: 특정 연속 트레이스에서도 매끄러움 유지.

## "끝이라고 말하기 전까지는 끝난 게 아니다"

UI가 기능적으로 동작하므로 충분하다 느끼던 시점에서 실제로 QA 과정 중 따라했던 범위에서 안정성 부족으로 자주 튕겼다. 배민에서도 이 지점이 개발 "백로그에서 골치 아팠다"고 리드를 기술 블로그로 남겼는데 특히 기본적인 문제부터 깊게 파고들어야 했을 거다. 특히 정립 전이나 기본 도메인이 잡히지 않았을 때부터, 이런 저런 문제들이 쏟아져 나왔고, 결국 UI 개선이 먼저 될 수는 없다는 걸 깨달았다.

기능은 동작하지만, 한 번 백로그가 시작되면 끝이 보이지 않는다는 걸 느꼈다. 그래서 이 시점에서는 "일단 UI를 완성"하는 식으로 접근할 게 아니라, 백로그를 정리하면서 기본적인 인프라를 단단히 하기로 했다.

:::info 1줄 요약
클라이언트·서버가 동작하는 단계에서 드러난 CDP 메시지 매칭, 이벤트 저장·재현, QA 안정성 문제들을 백로그로 다루면서 기본 인프라를 단단히 하기로 마음먹었고, "끝이라고 말하기 전까지는 끝난 게 아니다"라는 배민의 말을 뼈대 깊게 새겼다.
:::