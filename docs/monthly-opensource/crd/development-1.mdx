---
title: 3-1. 배민 구현 따라하기
date: 2026-02-16
---

# 3-1. 배민 구현 따라하기

## CDP 클라이언트 기본 골격

배민의 '배민 디버깅'은 CDP를 기반으로 프로토콜 메시지를 주고받고, 브라우저의 DevTools UI에 전달하거나 별도의 웹 UI를 만든다는 구조였다. 일단 기본 골격만 잡고 시작.

- 서버: CDP 연결 대기 → 클라이언트 명령을 받아서 브라우저 실행·제어
- 클라이언트: DevTools UI나 별도 뷰에서 CDP 명령을 보내고 결과를 받아서 렌더링

개념만으로는 부족해서 devtools-remote-debugger를 먼저 훑어봤다.

## devtools-remote-debugger 살펴보기

devtools-remote-debugger는 devtools-protocol 위에 CDP 서버·클라이언트를 구현한 녀석이다. 기능만 보면

- 한 명의 개발자만의 디버깅 서버
- HTTP(S)로 명령·결과 주고받기
- devtools-protocol 기반의 디바이스 네트워크 통신 모델

정도로 커버 가능했다. 실제 코드에서는 WebSocket로 CDP 연결을 열고, 메시지를 받으면서 그걸 그대로 전달하고, 다시 받은 건을 콘솔로 출력하는 간단한 구조였다.

이걸 그대로 활용할지, 아니면 배민처럼 개별 화면을 띄우고 UI를 갖춰야 할지는 아직도 안개 낀 상태.

## 프로토콜 뜯어보기

chrome-devtools-frontend 도 있었고, devtools-protocol 타입에도 당연히 흐름이 있었다.

- Connect → WebSocket 열기
- Initial handshake (Target.createTarget, Page.enable, Console.enable…)
- 메시지 핸들링 (Command → Event의 사이클)

일단은

- 명령을 보내면 응답을 기다린다
- 이벤트가 생기면 즉시 브라우저에서 발생한 대로 처리한다

이런 흐름을 한 번 직접 해보면서, 실제로 어떤 도메인(Target, Page, Network…)이 있고 어떤 메시지가 쏘아지는지 눈으로 확인해보는 게 목표였다.

## 웹뷰에 붙이기

배민은 웹뷰까지 지원한다. 웹뷰에 붙이는 건 간단했다.

- 웹뷰가 실행 중인 시스템에 CDP 엔드포인트 노출
- 프로토콜 뷰어에서 Target 목록 확인
- 그중에서 웹뷰에 해당하는 타겟을 선택해서 디버깅

하지만 여기에서도 한계가 있었다.

- 시스템 프로세스에서 웹뷰의 CDP 포트를 찾던가
- 아니면 웹뷰를 빌드할 때 CDP 미들웨어를 넣어두던가

배민은 어떻게 구현했는지 확인이 필요하다. 그게 아직 구현 전이라 아직은 단언할 수 없다.

:::info 1줄 요약
CDP 프로토콜로 웹뷰 디버거를 짜는 기본 골격을 잡았고, devtools-remote-debugger를 뜯어봤지만 웹뷰까지 정확히 어떻게 붙이는지는 아직 확인 단계.
:::